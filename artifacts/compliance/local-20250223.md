# Compliance Evidence

- Timestamp: 2025-10-23T20:29:06.281Z
- Git commit: d31ca06a810bf745ba579e56ee4ccf011b255e58
- Tag: local-20250223
- Base URL: http://localhost:3000
- Skip k6: false

## pnpm -r test

- Exit code: 0

```text
Scope: 4 of 5 workspace projects
worker test$ echo test worker
webapp test$ playwright test
worker test: test worker
worker test: Done
webapp test: [2m[WebServer] [22m
webapp test: [2m[WebServer] [22m> @apgms/webapp@0.1.0 dev C:\src\APGMS-Final\APGMS-Final\webapp
webapp test: [2m[WebServer] [22m> vite "--port" "5173"
webapp test: [2m[WebServer] [22m
webapp test: [2m[WebServer] [22m
webapp test: [2m[WebServer] [22m  [32m[1mVITE[22m v5.4.21[39m  [2mready in [0m[1m495[22m[2m[0m ms[22m
webapp test: [2m[WebServer] [22m
webapp test: [2m[WebServer] [22m  [32mâžœ[39m  [1mLocal[22m:   [36mhttp://localhost:[1m5173[22m/[39m
webapp test: [2m[WebServer] [22m  [32mâžœ[39m  [1mNetwork[22m: [36mhttp://172.27.80.1:[1m5173[22m/[39m
webapp test: [2m[WebServer] [22m  [32mâžœ[39m  [1mNetwork[22m: [36mhttp://192.168.208.170:[1m5173[22m/[39m
webapp test: Running 4 tests using 2 workers
webapp test:   ok 1 [chromium] â€º tests\axe.spec.ts:8:5 â€º Accessibility for / â€º should have no detectable Axe violations on / (2.7s)
webapp test:   ok 2 [chromium] â€º tests\a11y.spec.ts:8:5 â€º Accessibility regression checks â€º ensures / meets WCAG 2.1 AA requirements (2.7s)
webapp test:   ok 4 [chromium] â€º tests\axe.spec.ts:8:5 â€º Accessibility for /bank-lines â€º should have no detectable Axe violations on /bank-lines (2.3s)
webapp test:   ok 3 [chromium] â€º tests\a11y.spec.ts:8:5 â€º Accessibility regression checks â€º ensures /bank-lines meets WCAG 2.1 AA requirements (2.3s)
webapp test:   4 passed (9.3s)
webapp test: Done
services/api-gateway test$ tsx --test test/run.ts
services/api-gateway test: TAP version 13
services/api-gateway test: # Subtest: POST /admin/data/delete
services/api-gateway test:     # Subtest: returns 401 without bearer token
services/api-gateway test:     ok 1 - returns 401 without bearer token
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 73.749
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: rejects non-admin principals
services/api-gateway test:     ok 2 - rejects non-admin principals
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 8.2014
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: validates confirm token
services/api-gateway test:     ok 3 - validates confirm token
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 11.0832
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: returns 404 for unknown subject
services/api-gateway test:     ok 4 - returns 404 for unknown subject
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 18.8911
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: anonymizes user with constraint risk
services/api-gateway test:     ok 5 - anonymizes user with constraint risk
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 253.9234
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: hard deletes user when no constraint risk
services/api-gateway test:     ok 6 - hard deletes user when no constraint risk
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 14.1647
services/api-gateway test:       ...
services/api-gateway test:     1..6
services/api-gateway test: ok 1 - POST /admin/data/delete
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 382.4402
services/api-gateway test:   type: 'suite'
services/api-gateway test:   ...
services/api-gateway test: # Subtest: 401 without token
services/api-gateway test: ok 2 - 401 without token
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 12.2886
services/api-gateway test:   ...
services/api-gateway test: # Subtest: 403 when principal is not admin
services/api-gateway test: ok 3 - 403 when principal is not admin
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 6.5211
services/api-gateway test:   ...
services/api-gateway test: # Subtest: 404 when subject is missing
services/api-gateway test: ok 4 - 404 when subject is missing
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 6.351
services/api-gateway test:   ...
services/api-gateway test: # Subtest: 200 returns expected export bundle
services/api-gateway test: ok 5 - 200 returns expected export bundle
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 10.2317
services/api-gateway test:   ...
services/api-gateway test: # Subtest: loadConfig parses typed values and defaults
services/api-gateway test: ok 6 - loadConfig parses typed values and defaults
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 4.715
services/api-gateway test:   ...
services/api-gateway test: # Subtest: loadConfig fails closed when secrets missing
services/api-gateway test: ok 7 - loadConfig fails closed when secrets missing
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 1.0043
services/api-gateway test:   ...
services/api-gateway test: # Subtest: ABN validation
services/api-gateway test:     # Subtest: accepts known valid ABNs
services/api-gateway test:     ok 1 - accepts known valid ABNs
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 0.6469
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: rejects invalid ABNs
services/api-gateway test:     ok 2 - rejects invalid ABNs
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 0.3152
services/api-gateway test:       ...
services/api-gateway test:     1..2
services/api-gateway test: ok 8 - ABN validation
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 1.1273
services/api-gateway test:   type: 'suite'
services/api-gateway test:   ...
services/api-gateway test: # Subtest: TFN handling
services/api-gateway test:     # Subtest: never exposes the original TFN
services/api-gateway test:     ok 1 - never exposes the original TFN
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 11.6774
services/api-gateway test:       ...
services/api-gateway test:     1..1
services/api-gateway test: ok 9 - TFN handling
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 11.8129
services/api-gateway test:   type: 'suite'
services/api-gateway test:   ...
services/api-gateway test: # Subtest: admin decryption
services/api-gateway test:     # Subtest: emits an audit event when decryption succeeds
services/api-gateway test:     ok 1 - emits an audit event when decryption succeeds
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 8.4679
services/api-gateway test:       ...
services/api-gateway test:     # Subtest: denies non-admin access
services/api-gateway test:     ok 2 - denies non-admin access
services/api-gateway test:       ---
services/api-gateway test:       duration_ms: 12.933
services/api-gateway test:       ...
services/api-gateway test:     1..2
services/api-gateway test: ok 10 - admin decryption
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 21.8016
services/api-gateway test:   type: 'suite'
services/api-gateway test:   ...
services/api-gateway test: # Subtest: Privacy integration suite requires RUN_PRIVACY_SUITE=true
services/api-gateway test: ok 11 - Privacy integration suite requires RUN_PRIVACY_SUITE=true # SKIP
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 1.1497
services/api-gateway test:   ...
services/api-gateway test: # Subtest: Readiness integration test requires RUN_READY_SUITE=true
services/api-gateway test: ok 12 - Readiness integration test requires RUN_READY_SUITE=true # SKIP
services/api-gateway test:   ---
services/api-gateway test:   duration_ms: 0.1076
services/api-gateway test:   ...
services/api-gateway test: 1..12
services/api-gateway test: # tests 19
services/api-gateway test: # suites 4
services/api-gateway test: # pass 17
services/api-gateway test: # fail 0
services/api-gateway test: # cancelled 0
services/api-gateway test: # skipped 2
services/api-gateway test: # todo 0
services/api-gateway test: # duration_ms 2320.5766
services/api-gateway test: Done
```

## pnpm -r typecheck

- Exit code: 0

```text
Scope: 4 of 5 workspace projects
shared typecheck$ tsc --noEmit -p tsconfig.json
worker typecheck$ echo no typecheck for worker
webapp typecheck$ tsc --noEmit
worker typecheck: no typecheck for worker
worker typecheck: Done
shared typecheck: Done
webapp typecheck: Done
services/api-gateway typecheck$ tsc --noEmit
services/api-gateway typecheck: Done
```

## pnpm --filter @apgms/shared exec prisma migrate status --schema prisma/schema.prisma

- Exit code: 0

```text
Prisma schema loaded from prisma\schema.prisma
Datasource "db": PostgreSQL database "apgms", schema "public" at "127.0.0.1:5432"

6 migrations found in prisma/migrations

Database schema is up to date!
```

## pnpm k6:smoke -- --env BASE_URL=http://localhost:3000

- Exit code: 4294967295

```text
> apgms@0.1.0 k6:smoke C:\src\APGMS-Final\APGMS-Final
> pnpm exec k6 run k6/smoke.js "--" "--env" "BASE_URL=http://localhost:3000"

â€‰ELIFECYCLEâ€‰ Command failed with exit code 4294967295.
```

```text
time="2025-10-24T06:29:30+10:00" level=error msg="accepts 1 arg(s), received 3: arg should either be \"-\", if reading script from stdin, or a path to a script file"
```

